<!DOCTYPE html>
<html lang="de-DE">
<head>
    <meta charset="utf-8">
    <title> sexy2d </title>
    <script src="app.js" type="module" defer></script>
    <script type="text/javascript" src="./webgl-utils.js"></script>

    <script id="vshader" type="x-shader/x-vertex" >#version 300 es
        layout (location = 0) in vec2 a_vertex_position;
        layout (location = 1) in vec4 a_vertex_color;
        layout (location = 2) in vec2 a_instance_position;
        layout (location = 3) in vec2 a_instance_velocity;

        uniform float u_time;
        uniform float u_point_size;

        //         attribute uint a_time_to_live; // TODO
        // attribute uint a_time_init; // TODO

        out vec4 position_feedback;
        out vec4 frag_color;
       // varying float frag_ttl; // TODO

        void main()
        {
            vec2 m = vec2( a_vertex_position.xy + 0.01 * u_time + a_instance_position.xy + a_instance_velocity.xy * u_time );

            gl_Position = vec4( a_vertex_position + a_instance_velocity + a_instance_position, 0.0, 1.0 );
            gl_PointSize = (1.0+a_vertex_position.x) * (1.0+a_vertex_position.y) * 10.0;

            frag_color = a_vertex_color;
            position_feedback = vec4( a_vertex_position.xy + 0.01 * u_time, 0.0, 1.0 );
        }

    </script>

    <script id="fshader" type="x-shader/x-fragment" >#version 300 es
        precision mediump float;
        in vec4 frag_color;
        out vec4 outColor;
        void main()
        {
            outColor = frag_color;
        }
    </script>
</head>
<body>
<style>#canvas{
    overflow: hidden;
}</style>
<canvas id="canvas" width="0px" height="0px" > Browser or device unsupported </canvas>
<label id="frametime">frametime:</label>
<label id="fps">fps:</label>

</body>
</html>
